# 龟迹复盘 - 股票个人投资分析系统

一个简洁实用的个人股票投资组合管理工具，帮助您追踪持仓、分析收益、复盘交易。

## 功能特性

### 📊 持仓管理
- **添加/删除持仓** - 支持通过股票代码、名称或拼音搜索添加股票
- **买入/卖出交易** - 记录每笔交易，支持加仓和减仓操作
- **动态成本价计算** - 根据买卖记录自动计算最新持仓成本
- **交易历史追踪** - 查看完整的交易记录，便于复盘分析
- **情绪标签** - 标记交易时的情绪状态（如冲动追高、理性建仓等）
- **原因标签** - 记录交易原因（如财报利好、技术突破、板块轮动等）

### 📈 收益分析
- **实时行情** - 从东方财富API获取最新股价数据
- **收益统计** - 显示总成本、总市值、总盈亏和收益率
- **个股明细** - 查看每只股票的成本、市值、盈亏和占比
- **涨跌幅计算** - 基于最新成本价计算，准确反映投资收益
- **清仓收益** - 追踪已清仓股票的总盈亏和收益率

### 📝 每日复盘
- **大盘指数追踪** - 实时显示上证指数、深证成指、创业板指等主要指数
- **持仓买卖情况** - 自动展示当日持仓盈亏、胜率统计
- **操作回顾与反思** - 自动提取当日交易记录，支持反思总结
- **市场情绪判断** - 记录当日市场情绪和观察笔记
- **总结感悟** - 快捷模板与自由文本结合，记录交易心得
- **历史复盘查看** - 日历视图浏览历史复盘记录
- **复盘导出** - 支持导出为 Markdown 或 PDF 格式

### 📰 新闻快讯
- **实时资讯** - 获取市场最新新闻和公告
- **持仓相关** - 自动筛选持仓股票相关资讯
- **快速浏览** - 简洁的卡片式展示

### 💾 数据管理
- **本地存储** - 数据保存在浏览器本地，无需注册登录
- **数据导出** - 支持导出JSON格式数据，方便备份
- **数据导入** - 支持从备份文件恢复数据

## 技术栈

- **前端框架**: React 19 + TypeScript
- **构建工具**: Vite
- **UI组件**: Tailwind CSS + shadcn/ui
- **图标库**: Lucide React
- **状态管理**: React Hooks
- **数据存储**: localStorage

## 快速开始

### 安装依赖

```bash
npm install
```

### 启动开发服务器

```bash
npm run dev
```

### 构建生产版本

```bash
npm run build
```

### 预览生产构建

```bash
npm run preview
```

## 项目结构

```
stock-app/
├── src/
│   ├── components/
│   │   ├── ui/              # 基础UI组件
│   │   └── dashboard/       # 业务组件
│   │       ├── PositionManager.tsx    # 持仓管理
│   │       ├── ProfitDashboard.tsx    # 收益分析
│   │       ├── NewsFeed.tsx           # 新闻快讯
│   │       ├── DataExport.tsx         # 数据管理
│   │       └── review/                # 每日复盘模块
│   │           ├── ReviewTab.tsx              # 复盘主入口
│   │           ├── ReviewEditor.tsx           # 复盘编辑器
│   │           ├── ReviewViewer.tsx           # 复盘查看器
│   │           ├── ReviewCalendar.tsx         # 日历组件
│   │           ├── sections/                 # 复盘板块
│   │           │   ├── MarketDataSection.tsx  # 大盘指数
│   │           │   ├── PositionSection.tsx    # 持仓买卖
│   │           │   ├── OperationsSection.tsx  # 操作回顾
│   │           │   └── SummarySection.tsx     # 总结感悟
│   │           └── shared/                   # 共享组件
│   ├── services/
│   │   ├── stockService.ts   # 股票行情API
│   │   ├── stockDatabase.ts  # 股票数据库
│   │   ├── tagService.ts     # 标签管理
│   │   ├── newsService.ts    # 新闻服务
│   │   └── reviewService.ts  # 复盘服务
│   ├── types/
│   │   ├── index.ts          # 核心类型定义
│   │   └── review.ts         # 复盘类型定义
│   ├── utils/
│   │   └── calculations.ts   # 计算工具
│   └── App.tsx               # 主应用
└── ...
```

## 核心功能说明

### 动态成本价计算

系统采用移动加权平均法计算持仓成本：

```
最新成本价 = (累计买入金额 - 累计卖出金额) / 当前持仓数量
```

每当执行买入或卖出操作时，系统会自动更新持仓成本，确保成本价准确反映您的实际投入。

### 每日复盘工作流

1. **选择日期** - 默认当日，可通过日历选择历史日期
2. **自动填充** - 系统自动拉取大盘数据、持仓信息、当日交易
3. **板块填写** - 依次填写各复盘板块内容
4. **保存复盘** - 数据保存至本地，可随时修改
5. **导出分享** - 支持导出为 Markdown/PDF 格式

### 数据来源

- **股票行情**: 东方财富API (`https://push2.eastmoney.com`)
- **股票数据库**: 内置A股常用股票代码及名称
- **市场指数**: 东方财富指数行情接口

### 数据隐私

- 所有数据存储在您的浏览器本地（localStorage）
- 不上传任何个人信息到服务器
- 建议定期使用导出功能备份数据

## 使用说明

### 1. 添加持仓

点击"添加持仓"按钮，搜索并选择股票，输入买入价格和数量即可添加。

### 2. 交易操作

- **买入**: 点击持仓卡片上的"买入"按钮进行加仓
- **卖出**: 点击"卖出"按钮进行减仓（会显示实现盈亏）

### 3. 每日复盘

1. 点击"每日复盘"标签页
2. 选择要复盘的日期（默认当日）
3. 填写各复盘板块：
   - 大盘指数与关键数据
   - 持仓买卖情况
   - 今日操作回顾与反思
   - 总结感悟
4. 点击"保存复盘"保存记录

### 4. 查看历史复盘

1. 点击"查看历史"按钮
2. 通过日历选择日期
3. 查看历史复盘内容
4. 可编辑或导出复盘记录

### 5. 刷新行情

点击"刷新价格"按钮获取最新股价，系统会自动更新涨跌幅。

## 注意事项

- 本项目数据仅供参考，不构成任何投资建议
- 股票投资有风险，入市需谨慎
- 建议定期备份数据，避免浏览器数据丢失

## License

Licensed under the Apache License, Version 2.0

## 致谢

- 股票数据来自 [东方财富网](https://www.eastmoney.com/)
- UI组件基于 [shadcn/ui](https://ui.shadcn.com/)
